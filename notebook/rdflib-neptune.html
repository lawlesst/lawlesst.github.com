<!DOCTYPE html>
<html>

<head>
  <title>Connecting Python&#39;s RDFLib to AWS Neptune</title>
  
  <link rel="stylesheet" href="/static/styles.css">
  
</head>

<body>
  <div id="content">
    <header>
      <a class="logo" href="/">home</a>
      <nav>
        <a href="/about.html">about</a>
        <a href="/archives.html">archive</a>
      </nav>
    </header>
    

<h1 class="title">Connecting Python&#39;s RDFLib to AWS Neptune</h3>
  <date>03-15-19</date>
  <div id="post-contents">
    <p>I've <a href="http://lawlesst.github.io/notebook/rdflib-stardog.html">written previously</a> about using <a href="https://github.com/RDFLib/rdflib">Python's RDFLib</a> to connect to various triple stores. For a current project, I'm using <a href="https://aws.amazon.com/neptune/">Amazon Neptune</a> as a triple store and the RDFLib <a href="https://rdflib.readthedocs.io/en/latest/apidocs/rdflib.plugins.stores.html#rdflib.plugins.stores.sparqlstore.SPARQLUpdateStore">SPARQLStore</a> implemenation did not work out of the box. I thought I would share my solution.</p>

<h3>The problem</h3>

<p>Neptune returns ntriples by default and RDFLib, by default in version 4.2.2, is expecting CONSTRUCT queries to return RDF/XML. The solution is to override RDFLib's SPARQLStore to explictly request RDF/XML from Neptune via HTTP content negotiation.</p>

<p>Once this is in place, you can query and update Neptune via SPARQL with RDFLib the same way that you would other triple stores.</p>

<h3>Code</h3>

<p>If you are interested in working with Neptune using RDFLib, here's a "NeptuneStore" and "NeptuneUpdateStore" implementation that you can use.</p>

<script src="https://gist.github.com/lawlesst/091e0f4b0103320cfffa55dbe1757fb6.js"></script>

  </div>

  

    <footer>
      <a href="/about.html">Ted Lawless</a>, 2023. <span class="last-updated">Last
        updated: 08-31-2023 14:56. </span>
    </footer>
  </div>

  

</body>

</html>